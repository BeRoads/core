/**
 * Intro.js v0.6.0
 * https://github.com/usablica/intro.js
 * MIT licensed
 *
 * Copyright (C) 2013 usabli.ca - A weekend project by Afshin Mehrabani (@afshinmeh)
 */(function(e,t){typeof exports=="object"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):t(e)})(this,function(e){function n(e){this._targetElement=e;this._options={nextLabel:"Next &rarr;",prevLabel:"&larr; Back",skipLabel:"Skip",doneLabel:"Done",tooltipPosition:"bottom",tooltipClass:"",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0}}function r(e){var t=[],n=this;if(this._options.steps){var r=[];for(var i=0,a=this._options.steps.length;i<a;i++){var l=this._options.steps[i];l.step=i+1;typeof l.element=="string"&&(l.element=document.querySelector(l.element));t.push(l)}}else{var r=e.querySelectorAll("*[data-intro]");if(r.length<1)return!1;for(var i=0,c=r.length;i<c;i++){var h=r[i],p=parseInt(h.getAttribute("data-step"),10);p>0&&(t[p-1]={element:h,intro:h.getAttribute("data-intro"),step:parseInt(h.getAttribute("data-step"),10),tooltipClass:h.getAttribute("data-tooltipClass"),position:h.getAttribute("data-position")||this._options.tooltipPosition})}var v=0;for(var i=0,c=r.length;i<c;i++){var h=r[i];if(h.getAttribute("data-step")==null){for(;;){if(typeof t[v]=="undefined")break;v++}t[v]={element:h,intro:h.getAttribute("data-intro"),step:v+1,tooltipClass:h.getAttribute("data-tooltipClass"),position:h.getAttribute("data-position")||this._options.tooltipPosition}}}}var m=[];for(var g=0;g<t.length;g++)t[g]&&m.push(t[g]);t=m;t.sort(function(e,t){return e.step-t.step});n._introItems=t;if(d.call(n,e)){s.call(n);var y=e.querySelector(".introjs-skipbutton"),b=e.querySelector(".introjs-nextbutton");n._onKeyDown=function(t){if(t.keyCode===27&&n._options.exitOnEsc==1){u.call(n,e);n._introExitCallback!=undefined&&n._introExitCallback.call(n)}else if(t.keyCode===37)o.call(n);else if(t.keyCode===39||t.keyCode===13){s.call(n);t.preventDefault?t.preventDefault():t.returnValue=!1}};n._onResize=function(e){f.call(n,document.querySelector(".introjs-helperLayer"))};if(window.addEventListener){this._options.keyboardNavigation&&window.addEventListener("keydown",n._onKeyDown,!0);window.addEventListener("resize",n._onResize,!0)}else if(document.attachEvent){this._options.keyboardNavigation&&document.attachEvent("onkeydown",n._onKeyDown);document.attachEvent("onresize",n._onResize)}}return!1}function i(e){this._currentStep=e-2;typeof this._introItems!="undefined"&&s.call(this)}function s(){typeof this._currentStep=="undefined"?this._currentStep=0:++this._currentStep;if(this._introItems.length<=this._currentStep){typeof this._introCompleteCallback=="function"&&this._introCompleteCallback.call(this);u.call(this,this._targetElement);return}var e=this._introItems[this._currentStep];typeof this._introBeforeChangeCallback!="undefined"&&this._introBeforeChangeCallback.call(this,e.element);l.call(this,e)}function o(){if(this._currentStep===0)return!1;var e=this._introItems[--this._currentStep];typeof this._introBeforeChangeCallback!="undefined"&&this._introBeforeChangeCallback.call(this,e.element);l.call(this,e)}function u(e){var t=e.querySelector(".introjs-overlay");t.style.opacity=0;setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},500);var n=e.querySelector(".introjs-helperLayer");n&&n.parentNode.removeChild(n);var r=document.querySelector(".introjs-showElement");r&&(r.className=r.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,""));var i=document.querySelectorAll(".introjs-fixParent");if(i&&i.length>0)for(var s=i.length-1;s>=0;s--)i[s].className=i[s].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");window.removeEventListener?window.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown);this._currentStep=undefined}function a(e,t,n){t.style.top=null;t.style.right=null;t.style.bottom=null;t.style.left=null;if(!this._introItems[this._currentStep])return;var r="",i=this._introItems[this._currentStep];typeof i.tooltipClass=="string"?r=i.tooltipClass:r=this._options.tooltipClass;t.className=("introjs-tooltip "+r).replace(/^\s+|\s+$/g,"");var r=this._options.tooltipClass,s=this._introItems[this._currentStep].position;switch(s){case"top":t.style.left="15px";t.style.top="-"+(v(t).height+10)+"px";n.className="introjs-arrow bottom";break;case"right":t.style.left=v(e).width+20+"px";n.className="introjs-arrow left";break;case"left":t.style.top="15px";t.style.right=v(e).width+20+"px";n.className="introjs-arrow right";break;case"bottom":default:t.style.bottom="-"+(v(t).height+10)+"px";n.className="introjs-arrow top"}}function f(e){if(e){if(!this._introItems[this._currentStep])return;var t=v(this._introItems[this._currentStep].element);e.setAttribute("style","width: "+(t.width+10)+"px; "+"height:"+(t.height+10)+"px; "+"top:"+(t.top-5)+"px;"+"left: "+(t.left-5)+"px;")}}function l(e){typeof this._introChangeCallback!="undefined"&&this._introChangeCallback.call(this,e.element);var t=this,n=document.querySelector(".introjs-helperLayer"),r=v(e.element);if(n!=null){var i=n.querySelector(".introjs-helperNumberLayer"),l=n.querySelector(".introjs-tooltiptext"),d=n.querySelector(".introjs-arrow"),m=n.querySelector(".introjs-tooltip"),g=n.querySelector(".introjs-skipbutton"),y=n.querySelector(".introjs-prevbutton"),b=n.querySelector(".introjs-nextbutton");m.style.opacity=0;f.call(t,n);var w=document.querySelectorAll(".introjs-fixParent");if(w&&w.length>0)for(var E=w.length-1;E>=0;E--)w[E].className=w[E].className.replace(/introjs-fixParent/g,"").replace(/^\s+|\s+$/g,"");var S=document.querySelector(".introjs-showElement");S.className=S.className.replace(/introjs-[a-zA-Z]+/g,"").replace(/^\s+|\s+$/g,"");t._lastShowElementTimer&&clearTimeout(t._lastShowElementTimer);t._lastShowElementTimer=setTimeout(function(){i!=null&&(i.innerHTML=e.step);l.innerHTML=e.intro;a.call(t,e.element,m,d);n.querySelector(".introjs-bullets li > a.active").className="";n.querySelector('.introjs-bullets li > a[data-stepnumber="'+e.step+'"]').className="active";m.style.opacity=1},350)}else{var x=document.createElement("div"),T=document.createElement("div"),N=document.createElement("div"),C=document.createElement("div"),k=document.createElement("div"),L=document.createElement("div");x.className="introjs-helperLayer";f.call(t,x);this._targetElement.appendChild(x);T.className="introjs-arrow";C.className="introjs-tooltiptext";C.innerHTML=e.intro;k.className="introjs-bullets";this._options.showBullets===!1&&(k.style.display="none");var A=document.createElement("ul");for(var E=0,O=this._introItems.length;E<O;E++){var M=document.createElement("li"),_=document.createElement("a");_.onclick=function(){t.goToStep(this.getAttribute("data-stepnumber"))};E===0&&(_.className="active");_.href="javascript:void(0);";_.innerHTML="&nbsp;";_.setAttribute("data-stepnumber",this._introItems[E].step);M.appendChild(_);A.appendChild(M)}k.appendChild(A);L.className="introjs-tooltipbuttons";this._options.showButtons===!1&&(L.style.display="none");N.className="introjs-tooltip";N.appendChild(C);N.appendChild(k);if(this._options.showStepNumbers==1){var D=document.createElement("span");D.className="introjs-helperNumberLayer";D.innerHTML=e.step;x.appendChild(D)}N.appendChild(T);x.appendChild(N);var b=document.createElement("a");b.onclick=function(){t._introItems.length-1!=t._currentStep&&s.call(t)};b.href="javascript:void(0);";b.innerHTML=this._options.nextLabel;var y=document.createElement("a");y.onclick=function(){t._currentStep!=0&&o.call(t)};y.href="javascript:void(0);";y.innerHTML=this._options.prevLabel;var g=document.createElement("a");g.className="introjs-button introjs-skipbutton";g.href="javascript:void(0);";g.innerHTML=this._options.skipLabel;g.onclick=function(){t._introItems.length-1==t._currentStep&&typeof t._introCompleteCallback=="function"&&t._introCompleteCallback.call(t);t._introItems.length-1!=t._currentStep&&typeof t._introExitCallback=="function"&&t._introExitCallback.call(t);u.call(t,t._targetElement)};L.appendChild(g);if(this._introItems.length>1){L.appendChild(y);L.appendChild(b)}N.appendChild(L);a.call(t,e.element,N,T)}if(this._currentStep==0){y.className="introjs-button introjs-prevbutton introjs-disabled";b.className="introjs-button introjs-nextbutton";g.innerHTML=this._options.skipLabel}else if(this._introItems.length-1==this._currentStep){g.innerHTML=this._options.doneLabel;y.className="introjs-button introjs-prevbutton";b.className="introjs-button introjs-nextbutton introjs-disabled"}else{y.className="introjs-button introjs-prevbutton";b.className="introjs-button introjs-nextbutton";g.innerHTML=this._options.skipLabel}b.focus();e.element.className+=" introjs-showElement";var P=c(e.element,"position");P!=="absolute"&&P!=="relative"&&(e.element.className+=" introjs-relativePosition");var H=e.element.parentNode;while(H!=null){if(H.tagName.toLowerCase()==="body")break;var B=c(H,"z-index");/[0-9]+/.test(B)&&(H.className+=" introjs-fixParent");H=H.parentNode}if(!p(e.element)){var j=e.element.getBoundingClientRect(),F=h().height,I=j.bottom-(j.bottom-j.top),q=j.bottom-F;I<0||e.element.clientHeight>F?window.scrollBy(0,I-30):window.scrollBy(0,q+100)}}function c(e,t){var n="";e.currentStyle?n=e.currentStyle[t]:document.defaultView&&document.defaultView.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t));return n&&n.toLowerCase?n.toLowerCase():n}function h(){if(window.innerWidth!=undefined)return{width:window.innerWidth,height:window.innerHeight};var e=document.documentElement;return{width:e.clientWidth,height:e.clientHeight}}function p(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom+80<=window.innerHeight&&t.right<=window.innerWidth}function d(e){var t=document.createElement("div"),n="",r=this;t.className="introjs-overlay";if(e.tagName.toLowerCase()==="body"){n+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;";t.setAttribute("style",n)}else{var i=v(e);if(i){n+="width: "+i.width+"px; height:"+i.height+"px; top:"+i.top+"px;left: "+i.left+"px;";t.setAttribute("style",n)}}e.appendChild(t);t.onclick=function(){if(r._options.exitOnOverlayClick==1){u.call(r,e);r._introExitCallback!=undefined&&r._introExitCallback.call(r)}};setTimeout(function(){n+="opacity: .8;";t.setAttribute("style",n)},10);return!0}function v(e){var t={};t.width=e.offsetWidth;t.height=e.offsetHeight;var n=0,r=0;while(e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop)){n+=e.offsetLeft;r+=e.offsetTop;e=e.offsetParent}t.top=r;t.left=n;return t}function m(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n}var t="0.6.0",g=function(e){if(typeof e=="object")return new n(e);if(typeof e=="string"){var t=document.querySelector(e);if(t)return new n(t);throw new Error("There is no element with given selector.")}return new n(document.body)};g.version=t;g.fn=n.prototype={clone:function(){return new n(this)},setOption:function(e,t){this._options[e]=t;return this},setOptions:function(e){this._options=m(this._options,e);return this},start:function(){r.call(this,this._targetElement);return this},goToStep:function(e){i.call(this,e);return this},exit:function(){u.call(this,this._targetElement)},refresh:function(){f.call(this,document.querySelector(".introjs-helperLayer"));return this},onbeforechange:function(e){if(typeof e!="function")throw new Error("Provided callback for onbeforechange was not a function");this._introBeforeChangeCallback=e;return this},onchange:function(e){if(typeof e!="function")throw new Error("Provided callback for onchange was not a function.");this._introChangeCallback=e;return this},oncomplete:function(e){if(typeof e!="function")throw new Error("Provided callback for oncomplete was not a function.");this._introCompleteCallback=e;return this},onexit:function(e){if(typeof e!="function")throw new Error("Provided callback for onexit was not a function.");this._introExitCallback=e;return this}};e.introJs=g;return g});$(".delete").on("click",function(){return window.confirm("Are you sure you want to delete this?")});$(".btn.edit-user").on("click",function(e){e.preventDefault();var t=$(this).parents(".dataset"),n=t.data("id"),r=t.data("name"),i=t.data("group"),s=$("#editUser");$("#inputEditId").val(n);$("#inputEditName").prop("disabled",!1).val(r);$("#inputEditGroup").prop("disabled",!1);$('#inputEditGroup option[value="'+i+'"]').prop("selected",!0);if(n<3){$("#inputEditName").prop("disabled",!0);$("#inputEditGroup").prop("disabled",!0);n<2&&$("#inputEditPassword").prop("disabled",!0)}s.modal("show")});$(".btn.edit-group").on("click",function(e){e.preventDefault();var t=$(this).parents(".dataset"),n=t.data("id"),r=t.data("name"),i=$("#editGroup");$("#inputEditId").val(n);$("#inputEditName").val(r);i.modal("show")});$(".permissions").hide();$(".edit-permissions").on("click",function(e){$(this).next(".permissions").toggle()});$(".hover-help").tooltip();$(".hover-help").on("click",function(e){e.preventDefault()});$(".btn-add-dataset").on("click",function(e){e.preventDefault();var t=$(".tab-pane.active"),n=$("form.add-dataset",t),r=t.data("mediatype"),i=new Object,s="";$("input",n).each(function(){$(this).attr("name")&&($(this).attr("name")=="collection"?s=$(this).val():$(this).attr("type")=="checkbox"?i[$(this).attr("name")]=$(this).attr("checked")?1:0:i[$(this).attr("name")]=$(this).val())});$.ajax({url:baseURL+"api/definitions/"+s,data:JSON.stringify(i),method:"PUT",headers:{"Content-Type":"application/tdt."+r,Authorization:authHeader},success:function(e){window.location=baseURL+"api/admin/datasets"},error:function(e){if(e.status!=405){var n=JSON.parse(e.responseText);if(n.error&&n.error.message){$(".error .text",t).html(n.error.message);$(".error",t).removeClass("hide").show().focus()}}else window.location=baseURL+"api/admin/datasets"}})});$(".btn-edit-dataset").on("click",function(e){e.preventDefault();var t=$("form.edit-dataset"),n=t.data("mediatype"),r=t.data("identifier"),i=new Object,s="";$("input",t).each(function(){$(this).attr("name")&&($(this).attr("type")=="checkbox"?i[$(this).attr("name")]=$(this).attr("checked")?1:0:i[$(this).attr("name")]=$(this).val())});$.ajax({url:baseURL+"api/definitions/"+r,data:JSON.stringify(i),method:"POST",headers:{Authorization:authHeader},success:function(e){window.location=baseURL+"api/admin/datasets"},error:function(e){if(e.status!=405){var t=JSON.parse(e.responseText);if(t.error&&t.error.message){$(".error .text").html(t.error.message);$(".error").removeClass("hide").show().focus()}}else window.location=baseURL+"api/admin/datasets"}})});$(".introjs").on("click",function(e){e.preventDefault();introJs().start()});